@tailwind base;
@tailwind components;
@tailwind utilities;

/* Import Tailwindadmin CSS structure */
@import "./css/layouts/container.css";
@import "./css/layouts/sidebar.css";
@import "./css/layouts/horizontal.css";
@import "./css/layouts/header.css";
@import "./css/pages/dashboards.css";
@import "./css/pages/widgets.css";
@import "./css/pages/landingpage.css";
@import "./css/pages/frontend-pages.css";
@import "./css/pages/auth.css";
@import "./css/pages/app.css";
@import "./css/theme/dark.css";
@import "./css/override/reboot.css";
@import "./css/layouts/rtl.css";
@import "./css/theme/default-theme.css";

@layer base {
  /* Tailwindadmin CSS Variables - Adapted from @theme inline for Tailwind v3 */
  :root {
    /* Color mappings */
    --color-background: var(--background);
    --color-foreground: var(--foreground);
    --color-sidebar-ring: var(--sidebar-ring);
    --color-sidebar-border: var(--sidebar-border);
    --color-sidebar-accent-foreground: var(--sidebar-accent-foreground);
    --color-sidebar-accent: var(--sidebar-accent);
    --color-sidebar-primary-foreground: var(--sidebar-primary-foreground);
    --color-sidebar-primary: var(--sidebar-primary);
    --color-sidebar-foreground: var(--sidebar-foreground);
    --color-sidebar: var(--sidebar);
    --color-chart-5: var(--error);
    --color-chart-4: var(--warning);
    --color-chart-3: var(--success);
    --color-chart-2: var(--secondary);
    --color-chart-1: var(--primary);
    --color-ring: var(--lightprimary);
    --color-input: var(--border);
    --color-border: var(--border);
    --color-destructive: var(--error);
    --color-accent-foreground: var(--accent-foreground);
    --color-accent: var(--accent);
    --color-muted-foreground: var(--muted-foreground);
    --color-muted: var(--muted);
    --color-secondary-foreground: var(--white);
    --color-secondary: var(--secondary);
    --color-primary-foreground: var(--white);
    --color-primary: var(--primary);
    --color-popover-foreground: var(--foreground);
    --color-popover: var(--popover);
    --color-card-foreground: var(--card-foreground);
    --color-card: var(--card);
    --color-success: var(--success);
    --color-info: var(--info);
    --color-warning: var(--warning);
    --color-error: var(--error);
    --color-lightprimary: var(--lightprimary);
    --color-lightsecondary: var(--lightsecondary);
    --color-lightsuccess: var(--lightsuccess);
    --color-lightinfo: var(--lightinfo);
    --color-lightwarning: var(--lightwarning);
    --color-lighterror: var(--lighterror);
    --color-primaryemphasis: var(--primary-emphasis);
    --color-secondaryemphasis: var(--secondary-emphasis);
    --color-successemphasis: var(--success-emphasis);
    --color-infoemphasis: var(--info-emphasis);
    --color-warningemphasis: var(--warning-emphasis);
    --color-erroremphasis: var(--error-emphasis);
    --color-bordergray: var(--bordergray);
    --color-lightgray: var(--lightgray);
    --color-bodytext: var(--bodytext);
    --color-lightmuted: var(--lightmuted);
    --color-grayemphasis: var(--gray-emphasis);
    --color-lightemphasis: var(--light-emphasis);
    --color-dark: var(--dark);
    --color-link: var(--link);
    --color-darkgray: var(--darkgray);
    --color-darkinfo: var(--darkinfo);
    --color-destructive-foreground: var(--destructive-foreground);
    --color-darkmuted: var(--muted);
    --color-darklink: var(--link);
    --color-darkborder: var(--border);
    --color-cyan-500: var(--primary);
    --color-cyan-600: var(--primary);
    --color-cyan-700: var(--primary);
    --shadow-md: var(--shadow-md);
    --shadow-lg: var(--shadow-lg);
    --shadow-dark-md: var(--shadow-dark-md);
    --shadow-sm: var(--shadow-sm);
    --shadow-btn-shadow: var(--shadow-btn-shadow);
    --text-40: var(--text-40);
    --text-56: var(--text-56);
    --text-fs_21: var(--text-fs_21);
    --text-fs_13: var(--text-fs_13);
    --text-fs_28: var(--text-fs_28);
    --leading-21: var(--leading-21);

    /* ShadCN Component Variables */
    --radius: 10px;
    --background: #fff;
    --foreground: var(--color-link);
    --card: var(--color-white);
    --card-foreground: var(--color-link);
    --popover: var(--color-white);
    --popover-foreground: var(--color-link);
    --primary: var(--color-primary);
    --primary-foreground: var(--color-white);
    --secondary: var(--color-secondary);
    --secondary-foreground: var(--color-white);
    --muted: #5a6a85;
    --muted-foreground: #737373;
    --accent: var(--color-lightprimary);
    --accent-foreground: var(--color-primary);
    --destructive: var(--color-error);
    --border: #e5e5e5;
    --input: var(--color-input);
    --ring: var(--color-lightprimary);
    --chart-1: var(--color-primary);
    --chart-2: var(--color-secondary);
    --chart-3: var(--color-success);
    --chart-4: var(--color-warning);
    --chart-5: var(--color-error);
    --sidebar: var(--color-white);
    --sidebar-foreground: var(--color-link);
    --sidebar-primary: var(--color-primary);
    --sidebar-primary-foreground: var(--color-white);
    --sidebar-accent: var(--color-lightprimary);
    --sidebar-accent-foreground: var(--color-primary);
    --sidebar-border: #e5e5e5;
    --sidebar-ring: #a1a1a1;

    /* Tailwindadmin custom color variables */
    --info: #8754ec;
    --success: #13deb9;
    --warning: #f6b51e;
    --error: #ef4444;
    --white: #fff;
    --dark: #1c2536;
    --darkinfo: #223662;
    --lightgray: #f6f9fc;
    --bgmuted: #eff4fa;
    --darkgray: #465670;
    --bodytext: #5a6a85;
    --lightmuted: #5d7287;
    --link: #2a3547;
    --light-emphasis: #dfe5ef;
    --destructive-foreground: var(--color-white);
    --bordergray: var(--border);

    /* Lighter/opacity-like versions (using rgba fallback for color-mix) */
    --lightprimary: rgba(
      93,
      135,
      255,
      0.12
    ); /* Fallback: color-mix(in oklab, var(--color-primary) 12%, transparent) */
    --lightsecondary: rgba(73, 190, 255, 0.12);
    --lightsuccess: rgba(19, 222, 185, 0.12);
    --lightinfo: rgba(135, 84, 236, 0.12);
    --lightwarning: rgba(246, 181, 30, 0.12);
    --lighterror: rgba(239, 68, 68, 0.12);

    /* Darker versions (emphasis) - using rgba approximation */
    --primary-emphasis: rgba(93, 135, 255, 0.8);
    --secondary-emphasis: rgba(73, 190, 255, 0.8);
    --success-emphasis: rgba(19, 222, 185, 0.8);
    --info-emphasis: rgba(135, 84, 236, 0.8);
    --warning-emphasis: rgba(246, 181, 30, 0.8);
    --error-emphasis: rgba(239, 68, 68, 0.8);

    /* Shadow variables */
    --shadow-md:
      rgb(145 158 171 / 30%) 0px 0px 2px 0px,
      rgb(145 158 171 / 12%) 0px 12px 24px -4px;
    --shadow-lg: 0 1rem 3rem rgba(0, 0, 0, 0.175);
    --shadow-dark-md:
      rgba(145, 158, 171, 0.3) 0px 0px 2px 0px,
      rgba(145, 158, 171, 0.02) 0px 12px 24px -4px;
    --shadow-sm: 0 0.125rem 0.25rem rgba(0, 0, 0, 0.075);
    --shadow-btn-shadow: rgba(0, 0, 0, 0.05) 0 9px 17.5px;

    /* Font-size variables */
    --text-40: 40px;
    --text-56: 56px;
    --text-fs_21: 21px;
    --text-fs_13: 13px;
    --text-fs_28: 28px;

    /* Line-height variables */
    --leading-21: 21px;

    /* SelectionActionBar / design-system baseline (from CSS baseline) */
    --primary-text-color: #323338;
    --icon-color: #676879;
    --layout-border-color: #d0d4e4;
    --color-teal: #175a63;
    --box-shadow-small: 0px 4px 8px rgba(0, 0, 0, 0.2);
    --primary-background-color: #ffffff;
    --primary-background-hover-color: rgba(103, 104, 121, 0.1);
    --brand-color: #0073ea;
    --font-family:
      Figtree, Roboto, "Noto Sans Hebrew", "Noto Kufi Arabic", "Noto Sans JP",
      sans-serif;
    --font-size-10: 14px;
    --font-size-20: 14px;
    --font-line-height-10: 18px;
    --font-line-height-20: 24px;
    --font-weight-normal: 400;
    --font-weight-bold: 500;
    --spacing-xl: 32px;
    --disabled-component-opacity: 0.38;
    --motion-productive-short: 70ms;
  }

  .dark {
    --background: #1c2536;
    --foreground: var(--color-white);
    --card: var(--color-dark);
    --card-foreground: var(--color-white);
    --popover: var(--color-dark);
    --popover-foreground: var(--color-white);
    --primary: var(--color-primary);
    --primary-foreground: var(--color-white);
    --secondary: var(--color-secondary);
    --secondary-foreground: var(--color-white);
    --muted: #2a3851;
    --muted-foreground: var(--color-muted-foreground);
    --accent: var(--color-lightprimary);
    --accent-foreground: var(--color-primary);
    --destructive: var(--color-error);
    --border: #333f55;
    --input: var(--color-darkborder);
    --ring: var(--color-lightprimary);
    --chart-1: var(--color-primary);
    --chart-2: var(--color-secondary);
    --chart-3: var(--color-success);
    --chart-4: var(--color-warning);
    --chart-5: var(--color-error);
    --sidebar: var(--color-sidebar);
    --sidebar-foreground: var(--color-sidebar-foreground);
    --sidebar-primary: var(--color-sidebar-primary);
    --sidebar-primary-foreground: var(--color-sidebar-primary-foreground);
    --sidebar-accent: var(--color-sidebar-accent);
    --sidebar-accent-foreground: var(--color-sidebar-accent-foreground);
    --sidebar-border: var(--color-sidebar-border);
    --sidebar-ring: var(--color-sidebar-ring);
    --info: #8754ec;
    --success: #13deb9;
    --warning: #f6b51e;
    --error: #ef4444;
    --white: #fff;
    --dark: #1c2536;
    --darkinfo: #223662;
    --lightgray: #f6f9fc;
    --link: #7c8fac;
    --bgmuted: #eff4fa;
    --darkgray: #465670;
    --bodytext: #5a6a85;
    --lightmuted: #5d7287;
    --light-emphasis: #dfe5ef;
    --destructive-foreground: var(--color-white);
    --lightprimary: rgba(93, 135, 255, 0.12);
    --lightsecondary: rgba(73, 190, 255, 0.12);
    --lightsuccess: rgba(19, 222, 185, 0.12);
    --lightinfo: rgba(135, 84, 236, 0.12);
    --lightwarning: rgba(246, 181, 30, 0.12);
    --lighterror: rgba(239, 68, 68, 0.12);
    --primary-emphasis: rgba(93, 135, 255, 0.8);
    --secondary-emphasis: rgba(73, 190, 255, 0.8);
    --success-emphasis: rgba(19, 222, 185, 0.8);
    --info-emphasis: rgba(135, 84, 236, 0.8);
    --warning-emphasis: rgba(246, 181, 30, 0.8);
    --error-emphasis: rgba(239, 68, 68, 0.8);
  }

  /* Border color compatibility for Tailwind v3 */
  *,
  ::after,
  ::before,
  ::backdrop,
  ::file-selector-button {
    border-color: var(--color-gray-200, currentcolor);
  }
}

/* Convert @utility directives to @layer utilities for Tailwind v3 */
@layer utilities {
  .container {
    margin-inline: auto;
    padding-inline: 30px;
  }

  .landingpage .container {
    @apply max-w-[1320px];
  }

  .frontend-page .container {
    @apply max-w-[1410px];
  }

  .container-md {
    @apply max-w-[1218px] mx-auto;
  }

  .dropdown {
    @apply shadow-md bg-white dark:bg-dark rounded-sm dark:shadow-dark-md;
  }

  .dropdown-wrapper {
    @apply relative;
  }

  .card-title {
    @apply text-lg font-semibold text-dark dark:text-white;
  }

  .card-subtitle {
    @apply text-sm text-link font-normal;
  }

  .input-group input {
    @apply border border-border rounded-md border-r-0 rtl:border-r rtl:border-l-0 rounded-r-none rtl:rounded-r rtl:rounded-l-none bg-transparent dark:bg-transparent w-full text-sm;
  }

  .input-group input:focus {
    @apply border-primary dark:border-primary outline-hidden shadow-none ring-offset-0 dark:ring-transparent ring-transparent;
  }

  .border-less-input input {
    @apply border-none border-border rounded-md border-r-0 px-2.5 h-full rounded-r-none bg-transparent dark:bg-transparent w-full text-sm;
  }

  .border-less-input input:focus {
    @apply text-sm border-none ring-offset-0 dark:ring-transparent ring-transparent shadow-none;
  }

  .button-group span {
    @apply px-3 gap-1.5;
  }

  .border-ld {
    @apply border-border;
  }

  .bg-hover {
    @apply hover:bg-lightprimary dark:hover:bg-lightprimary;
  }

  .form-control input {
    @apply border rounded-md border-border bg-transparent ring-transparent dark:ring-transparent dark:bg-transparent w-full text-sm;
  }

  .form-control input:focus {
    @apply border-primary dark:border-primary outline-hidden shadow-none ring-offset-0 ring-transparent;
  }

  .form-control.trans-input input {
    @apply border border-ld bg-transparent dark:bg-transparent w-full ps-11 py-2 text-sm placeholder:text-black/50 dark:placeholder:text-lightgray rounded-xs;
  }

  .form-control.trans-input input:focus {
    @apply border-primary dark:border-primary outline-hidden shadow-none ring-offset-0 ring-transparent;
  }

  .form-control-group-left input {
    @apply border rounded-r-md border-border bg-transparent ring-transparent dark:ring-transparent dark:bg-transparent w-full text-sm;
  }

  .form-control-group-left input:focus {
    @apply shadow-none dark:shadow-none ring-transparent dark:ring-transparent;
  }

  .form-control-chat input {
    @apply rounded-md border-0 bg-transparent dark:bg-transparent w-full text-sm;
  }

  .form-control-chat input:focus {
    @apply border-0 bg-transparent dark:bg-transparent w-full text-sm ring-transparent dark:ring-transparent;
  }

  .form-control-rounded input {
    @apply rounded-full border border-border bg-transparent dark:bg-transparent w-full text-sm;
  }

  .form-control-rounded input:focus {
    @apply border-primary dark:border-primary outline-hidden shadow-none ring-offset-0 ring-transparent;
  }

  .form-control-textarea {
    @apply rounded-md border border-border bg-transparent dark:bg-transparent w-full text-sm p-4;
  }

  .form-control-textarea:focus {
    @apply border-primary dark:border-primary outline-hidden shadow-none ring-offset-0 ring-transparent;
  }

  .form-control-input {
    @apply rounded-md border border-border bg-transparent dark:bg-transparent w-full text-sm;
  }

  .form-control-input:focus {
    @apply border-primary dark:border-primary outline-hidden shadow-none ring-offset-0 ring-transparent;
  }

  .form-rounded-md input {
    @apply rounded-md border border-border bg-transparent dark:bg-transparent w-full text-sm;
  }

  .form-rounded-md input:focus {
    @apply border-primary dark:border-primary outline-hidden shadow-none ring-offset-0 ring-transparent;
  }

  .form-rounded input {
    @apply rounded-md;
  }

  .input-center input {
    @apply text-center;
  }

  .elipse {
    @apply w-[18px] h-[10px];
  }

  .select-option select {
    @apply bg-lightgray border-0 text-link dark:text-white/80 py-2 ps-4 pe-9 w-auto focus:border-0 focus:ring-0 font-medium;
  }

  .select-md select {
    @apply border-ld bg-transparent dark:bg-dark w-full py-2 ps-4 pr-10 dark:text-white text-bodytext text-sm rounded-md focus:border-primary dark:focus:border-primary focus:ring-0;
  }

  .select-md select option {
    @apply bg-white dark:bg-dark;
  }

  .select-md-contact select {
    @apply border-ld bg-transparent dark:bg-dark w-full py-2 ps-4 pr-10 dark:text-white text-bodytext text-sm rounded-md focus:border-primary dark:focus:border-primary focus:ring-0;
  }

  .select-rounded select {
    @apply border-ld bg-transparent dark:bg-dark w-full text-sm rounded-md focus:border-primary dark:focus:border-primary focus:ring-0;
  }

  .select-md-transparent select {
    @apply border-ld bg-transparent dark:bg-gray-800/70 w-full text-sm rounded-md focus:border-primary dark:focus:border-primary focus:ring-0;
  }

  .select-rounded-transparent select {
    @apply border-ld bg-transparent dark:bg-gray-800/70 w-full text-sm rounded-md focus:border-primary dark:focus:border-primary focus:ring-0;
  }

  .checkbox {
    @apply !h-[20px] !w-[20px] !border !border-border !bg-transparent focus:!ring-0 focus:!ring-offset-0 checked:!bg-primary dark:checked:!bg-primary rounded cursor-pointer !shrink-0;
  }

  .text-primary-ld {
    @apply hover:text-primary dark:hover:text-primary;
  }

  .left-part {
    @apply w-80 border-e border-ld p-6;
  }

  .btn-circle {
    @apply !h-8 !w-8 !rounded-md !flex justify-center items-center p-0 text-ld !shrink-0;
  }

  .btn-circle-hover {
    @apply h-9 w-9 flex justify-center items-center rounded-full hover:bg-lightprimary hover:text-primary cursor-pointer bg-transparent;
  }

  .text-ld {
    @apply text-dark dark:text-white/70;
  }

  .avatar-full img {
    @apply w-full h-full;
  }

  .sorting button {
    @apply bg-transparent text-dark dark:text-white p-0;
  }

  .sorting button:hover {
    @apply bg-transparent;
  }

  .sorting button span {
    @apply p-0;
  }

  .sorting ul li {
    @apply px-4 py-2;
  }

  .sorting ul li button:hover {
    @apply hover:text-primary;
  }

  .ui-button {
    @apply flex items-stretch justify-between !py-2.5 !px-5 text-white text-center font-medium rounded-md;
  }

  .ui-button-small {
    @apply flex items-stretch justify-between py-2 px-6 text-white text-center font-medium rounded-md;
  }

  .ui-dropdown {
    @apply text-ld w-full max-w-56 bg-white dark:bg-dark shadow-md dark:shadow-dark-md text-start rounded-sm py-3;
  }

  .ui-dropdown-item {
    @apply flex w-full gap-3 cursor-pointer items-center justify-start px-4 py-2 text-sm text-ld hover:text-primary bg-hover focus:bg-hover focus:outline-none;
  }

  .ui-dropdown-animation {
    @apply origin-top-right transition duration-100 ease-out focus:outline-none;
  }

  .ui-dropdown-animation[data-closed] {
    @apply scale-95 opacity-0;
  }

  .ui-form-control {
    @apply border border-border bg-transparent dark:bg-transparent w-full text-sm rounded-md;
  }

  .ui-form-control:focus {
    @apply border-primary dark:border-primary outline-hidden shadow-none ring-offset-0 ring-transparent dark:ring-transparent dark:focus:ring-0;
  }

  .ui-checkbox {
    @apply !h-[18px] !w-[18px] border !border-border !bg-white dark:!bg-transparent data-[checked]:!bg-primary dark:data-[checked]:!bg-primary rounded cursor-pointer focus:ring-0 focus:ring-offset-0 outline-hidden;
  }
}

@layer components {
  body {
    @apply text-sm overflow-x-hidden dark:bg-dark text-bodytext dark:text-link;
  }

  button {
    @apply !cursor-pointer;
  }

  pre {
    @apply !rounded-[12px];
  }

  /* Heading text color */
  h1,
  h2,
  h3,
  h4,
  h5,
  h6 {
    @apply text-dark dark:text-white font-semibold;
  }

  input[type="radio"]:focus {
    @apply !ring-primary;
  }

  input[type="radio"]:checked {
    @apply !bg-primary;
  }

  input::placeholder {
    @apply text-link;
  }

  span {
    @apply leading-none;
  }

  .ai-response h1,
  .ai-response h2,
  .ai-response h3,
  .ai-response h4,
  .ai-response h5,
  .ai-response h6 {
    margin-top: 1rem;
    margin-bottom: 0.5rem;
    font-weight: 600;
  }

  .ai-response p {
    margin: 0.3rem 0;
    line-height: 1.6;
  }

  .ai-response p strong {
    font-size: 15px;
  }

  .ai-response ul,
  .ai-response ol {
    margin-left: 1.5rem;
    margin-bottom: 1.5rem;
    list-style: disc;
  }

  .ai-response li {
    margin-bottom: 0.7rem;
  }
}

/* Sticky table header for ProspectHoverTable - High specificity to override any conflicting styles */
.prospect-hover-table thead {
  position: sticky !important;
  top: 0 !important;
  z-index: 20 !important;
  background-color: #ffffff !important;
}

.prospect-hover-table thead tr {
  background-color: #ffffff !important;
  position: relative !important;
}

.dark .prospect-hover-table thead {
  background-color: #1c2536 !important;
}

.dark .prospect-hover-table thead tr {
  background-color: #1c2536 !important;
}

/* Ensure no parent transforms or opacity break stacking context */
.prospect-hover-table {
  transform: none !important;
  opacity: 1 !important;
}

.prospect-hover-table thead {
  transform: none !important;
  opacity: 1 !important;
  isolation: isolate;
}

/* Dashboard overview - custom scrollbar & sparklines */
.dashboard-overview-scrollbar::-webkit-scrollbar {
  width: 4px;
}
.dashboard-overview-scrollbar::-webkit-scrollbar-track {
  background: transparent;
}
.dashboard-overview-scrollbar::-webkit-scrollbar-thumb {
  background-color: #cbd5e1;
  border-radius: 20px;
}
.dark .dashboard-overview-scrollbar::-webkit-scrollbar-thumb {
  background-color: #475569;
}
.sparkline path {
  stroke-dasharray: 100;
  stroke-dashoffset: 100;
  animation: sparkline-dash 1.5s ease-in-out forwards;
}
@keyframes sparkline-dash {
  to {
    stroke-dashoffset: 0;
  }
}
